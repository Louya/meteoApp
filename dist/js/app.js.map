{"version":3,"sources":["app.js"],"names":["location_input","document","querySelector","submit","verify","element","event","addEventListener","e","key","url","value","fetch","method","then","result","json","error","innerHTML","longitude","lon","latitude","lat","data","FormData","append","body","results","console","log","message","temperature","pluie","weatherData","querySelectorAll","weatherDate","setTime","weatherHeure","weatherDay","compass","month","day","onreadystatechange","readyState","navigator","geolocation","getCurrentPosition","position","coords","retourReponse","catch","connexionLogin","loginLogin","passLogin","window","location","replace","connexionlogin","loginlogin","passlogin","avatarMale","avatarFemale","avatar_m1","avatar_m2","avatar_m3","avatar_m4","avatar_f1","avatar_f2","avatar_f3","avatar_f4","array_avatar","array_skin","skin1","skin2","skin3","skin4","genre_male","genre_female","classList","add","remove","j","length","i","Chart","getElementById","type","labels","datasets","yAxisID","label","borderColor","fill","options","legend","display","title","text","scales","yAxes","id","ticks","min","max","gridLines","drawOnChartArea","validerRegister","mailRegister","passRegister","prenomRegister","sexeRegister","adresseRegister","villeRegister","colorRegister","verifyRegister","ville","address","city","town","route","road","style","backgroundColor"],"mappings":"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","file":"app.js","sourcesContent":["const location_input = document.querySelector(\"#location-input\");\nconst submit = document.querySelector(\"#adress\");\n\nfunction verify(element, event) {\n\n    element.addEventListener(event, (e) => {\n\n        if (e.key === \"Enter\" || event === \"click\") {\n           \n        \n            let city = location_input.value;\n            let url = `https://nominatim.openstreetmap.org/search?format=json&city=${city}`;\n\n            fetch(url, {method: \"POST\"})\n            .then( (result) => { return result.json() })\n            .then( (result) => {\n                if(!result.error){\n    \n                    let longitude = result[0].lon;\n                    let latitude = result[0].lat;\n\n                    let data = new FormData();\n                    \n                    data.append(\"latitude\", latitude);\n                    data.append(\"longitude\", longitude);\n\n                    fetch(\"/weather/get\", {method: \"POST\", body: data})\n                    .then( (results) => { return results.json() })\n                    .then( (results) => {\n                        if(!results.error){\n                            console.log(results);\n                        } else {\n                            document.querySelector(\"#error\").innerHTML = results.error;\n                        }\n                    });\n                    \n                } else {\n                    document.querySelector(\"#error\").innerHTML = result.error;\n                }\n            });\n\n        }\n    })\n}\n\nverify(submit, \"click\");\nverify(location_input, \"keydown\");\nconst message = document.querySelector(\"#message\");\nconst temperature = document.querySelector(\"#tempData\");\nconst pluie = document.querySelector(\"#tempRain\");\nconst weatherData = document.querySelectorAll(\".data\");\nconst weatherDate = document.querySelector(\"#weather-date\");\nconst setTime = document.querySelector(\"#setTime\");\nconst weatherHeure = document.querySelector(\"#weather-heure\");\nconst weatherDay = document.querySelector(\"#weather-day\");\nconst compass = document.querySelector(\"#compass\");\nconst month = ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'];\nconst day = ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'];\n\n\ndocument.onreadystatechange = function () {\n    console.log(\"onreadystatechange marche\");\n    if (document.readyState === \"complete\") {\n        console.log(\"if complete marche\");\n        if (navigator.geolocation) { /*demander l'autorisation d'obtenir la géolocalisation*/\n            navigator.geolocation.getCurrentPosition(function (position) {\n\n                let latitude = position.coords.latitude;\n                let longitude = position.coords.longitude;\n\n                let data = new FormData();\n\n                data.append(\"latitude\", latitude);\n                data.append(\"longitude\", longitude);\n\n                console.log(\"if geolocalisation marche\");\n                fetch(\"/weather/get\", {method: \"POST\", body: data})\n                    .then((retourReponse) => {\n                        return retourReponse.json();\n                    })\n                    .then((retourReponse) => {\n                        console.log(retourReponse);\n\n                    }).catch((error) => {\n                        console.log(error);\n                    });\n            })\n        }\n    }\n}\nconst connexionLogin = document.querySelector(\"#connexion_login\");\nconst loginLogin = document.querySelector(\"#login_login\");\nconst passLogin = document.querySelector(\"#pass_login\");\n\nfunction verify(element, event) {\n\n    element.addEventListener(event, (e) => {\n\n        if (e.key === \"Enter\" || event === \"click\") {\n           \n            let data = new FormData();\n            data.append(\"login\", loginLogin.value);\n            data.append(\"pass\", passLogin.value);\n        \n            fetch(\"/login/verif\", {method: \"POST\", body: data})\n            .then( (result) => { return result.json() } )\n            .then( (result) => {\n                // console.log(result.error);\n                if(!result.error){\n                    console.log(result);\n                    window.location.replace(\"/user\");\n                } else {\n                    document.querySelector(\"#error\").innerHTML = result.error;\n                }\n            });\n        }\n    })\n}\n\nverify(connexionlogin, \"click\");\nverify(loginlogin, \"keydown\");\nverify(passlogin, \"keydown\");\nconst avatarMale = document.querySelector(\"#maleButton\");\nconst avatarFemale = document.querySelector(\"#femaleButton\");\n\nconst avatar_m1 = document.querySelector(\"#avatar_m1\");\nconst avatar_m2 = document.querySelector(\"#avatar_m2\");\nconst avatar_m3 = document.querySelector(\"#avatar_m3\");\nconst avatar_m4 = document.querySelector(\"#avatar_m4\");\nconst avatar_f1 = document.querySelector(\"#avatar_f1\");\nconst avatar_f2 = document.querySelector(\"#avatar_f2\");\nconst avatar_f3 = document.querySelector(\"#avatar_f3\");\nconst avatar_f4 = document.querySelector(\"#avatar_f4\");\n\nconst array_avatar = document.querySelectorAll(\".img-fluid\");\nconst array_skin = document.querySelectorAll(\".my-2\");\n\nconst skin1 = document.querySelector(\"#skin1\");\nconst skin2 = document.querySelector(\"#skin2\");\nconst skin3 = document.querySelector(\"#skin3\");\nconst skin4 = document.querySelector(\"#skin4\");\n\nconst genre_male = document.querySelector(\"#maleButton\");\nconst genre_female = document.querySelector(\"#femaleButton\");\n\n\navatarMale.addEventListener(\"click\", (e) => {\n    genre_male.classList.add(\"genre\");\n    genre_female.classList.remove(\"genre\");\n    for (let j = 0; j < array_skin.length; j++) {\n        array_skin[j].addEventListener(\"click\", (e) => {\n            for (let i = 0; i < array_avatar.length; i++) {\n                array_avatar[i].classList.add(\"invisible\");\n            }\n            array_avatar[j].classList.remove(\"invisible\");\n        })\n    }\n})\n\navatarFemale.addEventListener(\"click\", (e) => {\n    genre_female.classList.add(\"genre\");\n    genre_male.classList.remove(\"genre\");\n    for (let j = 0; j < array_skin.length; j++) {\n        array_skin[j].addEventListener(\"click\", (e) => {\n            for (let i = 0; i < array_avatar.length; i++) {\n                array_avatar[i].classList.add(\"invisible\");\n            }\n            array_avatar[j+4].classList.remove(\"invisible\");\n        })\n    }\n})\nnew Chart(document.getElementById(\"summaryChart\"), {\n    type: 'line',\n    data: {\n      labels: ['00:00', '06:00', '12:00', '18:00', '23:00'],\n      datasets: [{ \n          data: [1, 3, 8, 5, 2],\n          yAxisID: 'temperature',\n          label: \"Température\",\n          borderColor: \"#980000\",\n          fill: true\n        }, { \n          data: [0, 2, 5, 10, 3],\n          yAxisID: 'rain',\n          label: \"Précipitation\",\n          borderColor: \"#030340\",\n          fill: true\n        }\n      ]\n    },\n    options: {\n        legend:{\n            display: false\n        },\n        title: {\n            display: false,\n            text: 'World population per region (in millions)'\n        },\n        scales: {\n            yAxes: [{\n                type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance\n                display: true,\n                position: 'left',\n                id: 'temperature',\n            }, {\n                type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance\n                display: true,\n                position: 'right',\n                id: 'rain',\n                ticks: {\n                    min: 0,\n                    max: 100\n                },\n\n                // grid line settings\n                gridLines: {\n                    drawOnChartArea: false, // only want the grid lines for one axis to show up\n                },\n            }],\n        }\n    }\n  });\n  \n// $('.message a').click(function(){\n//     $('form').animate({height: \"toggle\", opacity: \"toggle\"}, \"slow\");\n//  });\n\nconst validerRegister = document.querySelector(\"#valider-register\");\nconst mailRegister = document.querySelector(\"#mail-register\");\nconst passRegister = document.querySelector(\"#pass-register\");\nconst prenomRegister = document.querySelector(\"#prenom-register\");\nconst sexeRegister = document.querySelector(\"#sexe-register\");\nconst adresseRegister = document.querySelector(\"#adresse-register\");\nconst villeRegister = document.querySelector(\"#ville-register\");\nconst colorRegister = document.querySelector(\"#color-register\");\n\n\n\ndocument.onreadystatechange = function () {\n    if (document.readyState === \"complete\") {\n        if (navigator.geolocation) { /*demander l'autorisation d'obtenir la géolocalisation*/\n            navigator.geolocation.getCurrentPosition(function (position) {\n\n                let latitude = position.coords.latitude;\n                let longitude = position.coords.longitude;\n                let link = \"https://nominatim.openstreetmap.org/reverse?format=json&lat=\" + latitude + \"&lon=\" + longitude;\n\n                fetch(link, {method: \"POST\"})\n                .then( (result) => { return result.json() } )\n                .then( (result) => {\n                // console.log(result);\n\n                let ville = typeof result.address.city !== 'undefined' ? result.address.city:result.address.town; \n                let route = result.address.road;\n                \n                adresseRegister.value = route;\n                villeRegister.value = ville;\n\n                });\n\n            })\n        }\n    }\n}\n\n\n\n\n\ncolorRegister.addEventListener('click', () => {\n    colorRegister.style.backgroundColor = colorRegister.value; \n})\n\nfunction verifyRegister(element, event) {\n\n    element.addEventListener(event, (e) => {\n\n        if (e.key === \"Enter\" || event === \"click\") {\n            let data = new FormData();\n            data.append(\"mail\", mailRegister.value);\n            data.append(\"pass\", passRegister.value);\n            data.append(\"prenom\", prenomRegister.value);\n            data.append(\"sexe\", sexeRegister.value);\n            data.append(\"color\", colorRegister.value);\n            data.append(\"adresse\", adresseRegister.value);\n            data.append(\"ville\", villeRegister.value);\n        \n            fetch(\"/register/verif\", {method: \"POST\", body: data})\n            .then( (result) => { return result.json() } )\n            .then( (result) => {\n                console.log(result);\n                if(!result.message){\n                    document.querySelector(\".message\").innerHTML = \"Inscription réussie, vous allez être redirigé.\";\n                    // setTimeout(function(){\n                    //     window.location.replace(\"/weather\");\n                    // }, 3000);\n                } else {\n                    document.querySelector(\".message\").innerHTML = \"\";\n                    for (let i = 0; i < result.message.length; i++) {\n                        document.querySelector(\".message\").innerHTML += result.message[i] + '</br>';\n                    }\n                }\n                }\n            );\n        }\n    })\n}\n\nverifyRegister(validerRegister, \"click\");\nverifyRegister(mailRegister, \"keydown\");\nverifyRegister(passRegister, \"keydown\");\nverifyRegister(prenomRegister, \"keydown\");\nverifyRegister(adresseRegister, \"keydown\");\nverifyRegister(villeRegister, \"keydown\");\n"]}