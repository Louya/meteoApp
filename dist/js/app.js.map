{"version":3,"sources":["app.js"],"names":["console","log","document","onreadystatechange","readyState","navigator","geolocation","getCurrentPosition","position","latitude","coords","longitude","data","FormData","append","fetch","method","body","then","retourReponse","json","catch","error","connexion","querySelector","login","pass","verify","element","event","addEventListener","e","key","value","result","innerHTML","window","location","replace","$","click","animate","height","opacity","validerRegister","mailRegister","passRegister","prenomRegister","sexeRegister","localisationRegister","text"],"mappings":"AAAAA,QAAQC,IAAI,gBAEZC,SAASC,mBAAqB,WAC1BH,QAAQC,IAAI,6BACgB,aAAxBC,SAASE,aACTJ,QAAQC,IAAI,sBACRI,UAAUC,aACdD,UAAUC,YAAYC,mBAAmB,SAAUC,GAE/C,IAAIC,EAAWD,EAASE,OAAOD,SAC3BE,EAAYH,EAASE,OAAOC,UAE5BC,EAAO,IAAIC,SAEfD,EAAKE,OAAO,WAAYL,GACxBG,EAAKE,OAAO,YAAaH,GAEzBX,QAAQC,IAAI,6BACZc,MAAM,gBAAiBC,OAAQ,OAAQC,KAAML,IACxCM,KAAMC,GACIA,EAAcC,QAExBF,KAAMC,IAEHnB,QAAQC,IAAIkB,KAEbE,MAAOC,IACNtB,QAAQC,IAAIqB,SAOhC,MAAMC,UAAYrB,SAASsB,cAAc,cACnCC,MAAQvB,SAASsB,cAAc,UAC/BE,KAAOxB,SAASsB,cAAc,SAEpC,SAASG,OAAOC,EAASC,GAErBD,EAAQE,iBAAiBD,EAAQE,IAE7B,GAAc,UAAVA,EAAEC,KAA6B,UAAVH,EAAmB,CACxC,IAAIjB,EAAO,IAAIC,SACfD,EAAKE,OAAO,QAASW,MAAMQ,OAC3BrB,EAAKE,OAAO,OAAQY,KAAKO,OAEzBlB,MAAM,oCAAqCC,OAAQ,OAAQC,KAAML,IAChEM,KAAOgB,GAAoBA,EAAOd,QAClCF,KAAOgB,IAEAA,EAAOZ,MAGPpB,SAASsB,cAAc,UAAUW,UAAYD,EAAOZ,MAFpDc,OAAOC,SAASC,QAAQ,mCAS5CX,OAAOJ,UAAW,SAClBI,OAAOF,MAAO,WACdE,OAAOD,KAAM,WACba,EAAE,cAAcC,MAAM,WAClBD,EAAE,QAAQE,SAASC,OAAQ,SAAUC,QAAS,UAAW,UAG7D,MAAMC,gBAAkB1C,SAASsB,cAAc,qBACzCqB,aAAe3C,SAASsB,cAAc,kBACtCsB,aAAe5C,SAASsB,cAAc,kBACtCuB,eAAiB7C,SAASsB,cAAc,oBACxCwB,aAAe9C,SAASsB,cAAc,kBACtCyB,qBAAuB/C,SAASsB,cAAc,0BAEpD,SAASG,OAAOC,EAASC,GAErBD,EAAQE,iBAAiBD,EAAQE,IAE7B,GAAc,UAAVA,EAAEC,KAA6B,UAAVH,EAAmB,CACxC,IAAIjB,EAAO,IAAIC,SACfD,EAAKE,OAAO,OAAQ+B,aAAaZ,OACjCrB,EAAKE,OAAO,OAAQgC,aAAab,OACjCrB,EAAKE,OAAO,SAAUiC,eAAed,OACrCrB,EAAKE,OAAO,OAAQkC,aAAaf,OACjCrB,EAAKE,OAAO,eAAgBmC,qBAAqBhB,OAEjDlB,MAAM,mBAAoBC,OAAQ,OAAQC,KAAML,IAC/CM,KAAOgB,GAAoBA,EAAOgB,QAClChC,KAAOgB,IACJlC,QAAQC,IAAIiC,QAM5BP,OAAOiB,gBAAiB,SACxBjB,OAAOkB,aAAc,WACrBlB,OAAOmB,aAAc,WACrBnB,OAAOoB,eAAgB,WACvBpB,OAAOsB,qBAAsB","file":"app.js","sourcesContent":["console.log(\"le js charge\");\n\ndocument.onreadystatechange = function () {\n    console.log(\"onreadystatechange marche\");\n    if (document.readyState === \"complete\") {\n        console.log(\"if complete marche\");\n        if (navigator.geolocation) { /*demander l'autorisation d'obtenir la gÃ©olocalisation*/\n        navigator.geolocation.getCurrentPosition(function (position) {\n\n            let latitude = position.coords.latitude;\n            let longitude = position.coords.longitude;\n\n            let data = new FormData();\n\n            data.append(\"latitude\", latitude);\n            data.append(\"longitude\", longitude);\n\n            console.log(\"if geolocalisation marche\");\n            fetch(\"/weather/get\", {method: \"POST\", body: data})\n                .then((retourReponse) => {\n                    return retourReponse.json();\n                })\n                .then((retourReponse) => {\n\n                    console.log(retourReponse);\n\n                }).catch((error) => {\n                    console.log(error);\n                });\n            })\n        }\n    }\n}\n\nconst connexion = document.querySelector(\"#connexion\");\nconst login = document.querySelector(\"#login\");\nconst pass = document.querySelector(\"#pass\");\n\nfunction verify(element, event) {\n\n    element.addEventListener(event, (e) => {\n\n        if (e.key === \"Enter\" || event === \"click\") {\n            let data = new FormData();\n            data.append(\"login\", login.value);\n            data.append(\"pass\", pass.value);\n        \n            fetch(\"/wetransfer_like/admin/verifForm\", {method: \"POST\", body: data})\n            .then( (result) => { return result.json() } )\n            .then( (result) => {\n                // console.log(result.error);\n                if(!result.error){\n                    window.location.replace(\"/wetransfer_like/dashboard\");\n                } else {\n                    document.querySelector(\"#error\").innerHTML = result.error;\n                }\n            });\n        }\n    })\n}\n\nverify(connexion, \"click\");\nverify(login, \"keydown\");\nverify(pass, \"keydown\");\n$('.message a').click(function(){\n    $('form').animate({height: \"toggle\", opacity: \"toggle\"}, \"slow\");\n });\n\nconst validerRegister = document.querySelector(\"#valider-register\");\nconst mailRegister = document.querySelector(\"#mail-register\");\nconst passRegister = document.querySelector(\"#pass-register\");\nconst prenomRegister = document.querySelector(\"#prenom-register\");\nconst sexeRegister = document.querySelector(\"#sexe-register\");\nconst localisationRegister = document.querySelector(\"#localisation-register\");\n\nfunction verify(element, event) {\n\n    element.addEventListener(event, (e) => {\n\n        if (e.key === \"Enter\" || event === \"click\") {\n            let data = new FormData();\n            data.append(\"mail\", mailRegister.value);\n            data.append(\"pass\", passRegister.value);\n            data.append(\"prenom\", prenomRegister.value);\n            data.append(\"sexe\", sexeRegister.value);\n            data.append(\"localisation\", localisationRegister.value);\n        \n            fetch(\"/register/verif\", {method: \"POST\", body: data})\n            .then( (result) => { return result.text() } )\n            .then( (result) => {\n                console.log(result);\n            });\n        }\n    })\n}\n\nverify(validerRegister, \"click\");\nverify(mailRegister, \"keydown\");\nverify(passRegister, \"keydown\");\nverify(prenomRegister, \"keydown\");\nverify(localisationRegister, \"keydown\");"]}