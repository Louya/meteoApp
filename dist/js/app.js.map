{"version":3,"sources":["app.js"],"names":["console","log","document","onreadystatechange","readyState","navigator","geolocation","getCurrentPosition","position","latitude","coords","longitude","data","FormData","append","fetch","method","body","then","retourReponse","text","catch","error","connexion","querySelector","login","pass","verify","element","event","addEventListener","e","key","value","result","json","innerHTML","window","location","replace"],"mappings":"AAAAA,QAAQC,IAAI,gBAEZC,SAASC,mBAAqB,WAC1BH,QAAQC,IAAI,6BACgB,aAAxBC,SAASE,aACTJ,QAAQC,IAAI,sBACRI,UAAUC,aACdD,UAAUC,YAAYC,mBAAmB,SAAUC,GAE/C,IAAIC,EAAWD,EAASE,OAAOD,SAC3BE,EAAYH,EAASE,OAAOC,UAC5BC,EAAO,IAAIC,SAEfD,EAAKE,OAAO,WAAYL,GACxBG,EAAKE,OAAO,YAAaH,GAEzBX,QAAQC,IAAI,6BACZc,MAAM,gBAAiBC,OAAQ,OAAQC,KAAML,IACxCM,KAAMC,GACIA,EAAcC,QAExBF,KAAMC,IAEHnB,QAAQC,IAAIkB,KAEbE,MAAOC,IACNtB,QAAQC,IAAIqB,SAOhC,MAAMC,UAAYrB,SAASsB,cAAc,cACnCC,MAAQvB,SAASsB,cAAc,UAC/BE,KAAOxB,SAASsB,cAAc,SAEpC,SAASG,OAAOC,EAASC,GAErBD,EAAQE,iBAAiBD,EAAQE,IAE7B,GAAc,UAAVA,EAAEC,KAA6B,UAAVH,EAAmB,CACxC,IAAIjB,EAAO,IAAIC,SACfD,EAAKE,OAAO,QAASW,MAAMQ,OAC3BrB,EAAKE,OAAO,OAAQY,KAAKO,OAEzBlB,MAAM,mBAAoBC,OAAQ,OAAQC,KAAML,IAC/CM,KAAOgB,GAAoBA,EAAOC,QAClCjB,KAAOgB,IAEAA,EAAOZ,MAGPpB,SAASsB,cAAc,UAAUY,UAAYF,EAAOZ,MAFpDe,OAAOC,SAASC,QAAQ,mCAS5CZ,OAAOJ,UAAW,SAClBI,OAAOF,MAAO,WACdE,OAAOD,KAAM","file":"app.js","sourcesContent":["console.log(\"le js charge\");\n\ndocument.onreadystatechange = function () {\n    console.log(\"onreadystatechange marche\");\n    if (document.readyState === \"complete\") {\n        console.log(\"if complete marche\");\n        if (navigator.geolocation) { /*demander l'autorisation d'obtenir la gÃ©olocalisation*/\n        navigator.geolocation.getCurrentPosition(function (position) {\n\n            let latitude = position.coords.latitude;\n            let longitude = position.coords.longitude;\n            let data = new FormData();\n\n            data.append(\"latitude\", latitude);\n            data.append(\"longitude\", longitude);\n\n            console.log(\"if geolocalisation marche\");\n            fetch(\"/weather/get\", {method: \"POST\", body: data})\n                .then((retourReponse) => {\n                    return retourReponse.text();\n                })\n                .then((retourReponse) => {\n\n                    console.log(retourReponse);\n\n                }).catch((error) => {\n                    console.log(error);\n                });\n            })\n        }\n    }\n}\n\nconst connexion = document.querySelector(\"#connexion\");\nconst login = document.querySelector(\"#login\");\nconst pass = document.querySelector(\"#pass\");\n\nfunction verify(element, event) {\n\n    element.addEventListener(event, (e) => {\n\n        if (e.key === \"Enter\" || event === \"click\") {\n            let data = new FormData();\n            data.append(\"login\", login.value);\n            data.append(\"pass\", pass.value);\n        \n            fetch(\"/user/verifForm\", {method: \"POST\", body: data})\n            .then( (result) => { return result.json() } )\n            .then( (result) => {\n                // console.log(result.error);\n                if(!result.error){\n                    window.location.replace(\"/wetransfer_like/dashboard\");\n                } else {\n                    document.querySelector(\"#error\").innerHTML = result.error;\n                }\n            });\n        }\n    })\n}\n\nverify(connexion, \"click\");\nverify(login, \"keydown\");\nverify(pass, \"keydown\");"]}