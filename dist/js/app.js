const location_input=document.querySelector("#location-input"),submit=document.querySelector("#adress");function verify(e,r){e.addEventListener(r,e=>{if("Enter"===e.key||"click"===r){let e=`https://nominatim.openstreetmap.org/search?format=json&city=${location_input.value}`;fetch(e,{method:"POST"}).then(e=>e.json()).then(e=>{if(e.error)document.querySelector("#error").innerHTML=e.error;else{let r=e[0].lon,t=e[0].lat,a=new FormData;a.append("latitude",t),a.append("longitude",r),fetch("/weather/get",{method:"POST",body:a}).then(e=>e.json()).then(e=>{e.error?document.querySelector("#error").innerHTML=e.error:console.log(e)})}})}})}verify(submit,"click"),verify(location_input,"keydown");const message=document.querySelector("#message"),temperature=document.querySelector("#tempData"),pluie=document.querySelector("#tempRain"),weatherData=document.querySelectorAll(".data"),weatherDate=document.querySelector("#weather-date"),setTime=document.querySelector("#setTime"),weatherHeure=document.querySelector("#weather-heure"),weatherDay=document.querySelector("#weather-day"),compass=document.querySelector("#compass"),month=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],day=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"];document.onreadystatechange=function(){console.log("onreadystatechange marche"),"complete"===document.readyState&&(console.log("if complete marche"),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){let r=e.coords.latitude,t=e.coords.longitude,a=new FormData;a.append("latitude",r),a.append("longitude",t),console.log("if geolocalisation marche"),fetch("/weather/get",{method:"POST",body:a}).then(e=>e.json()).then(e=>{console.log(e)}).catch(e=>{console.log(e)})}))};const connexionLogin=document.querySelector("#connexion_login"),loginLogin=document.querySelector("#login_login"),passLogin=document.querySelector("#pass_login");function verify(e,r){e.addEventListener(r,e=>{if("Enter"===e.key||"click"===r){let e=new FormData;e.append("login",loginLogin.value),e.append("pass",passLogin.value),fetch("/login/verif",{method:"POST",body:e}).then(e=>e.json()).then(e=>{e.error?document.querySelector("#error").innerHTML=e.error:(console.log(e),window.location.replace("/user"))})}})}verify(connexionlogin,"click"),verify(loginlogin,"keydown"),verify(passlogin,"keydown");const avatarMale=document.querySelector("#maleButton"),avatarFemale=document.querySelector("#femaleButton"),avatar_m1=document.querySelector("#avatar_m1"),avatar_m2=document.querySelector("#avatar_m2"),avatar_m3=document.querySelector("#avatar_m3"),avatar_m4=document.querySelector("#avatar_m4"),avatar_f1=document.querySelector("#avatar_f1"),avatar_f2=document.querySelector("#avatar_f2"),avatar_f3=document.querySelector("#avatar_f3"),avatar_f4=document.querySelector("#avatar_f4"),array_avatar=document.querySelectorAll(".img-fluid"),array_skin=document.querySelectorAll(".my-2"),skin1=document.querySelector("#skin1"),skin2=document.querySelector("#skin2"),skin3=document.querySelector("#skin3"),skin4=document.querySelector("#skin4"),genre_male=document.querySelector("#maleButton"),genre_female=document.querySelector("#femaleButton");avatarMale.addEventListener("click",e=>{genre_male.classList.add("genre"),genre_female.classList.remove("genre");for(let e=0;e<array_skin.length;e++)array_skin[e].addEventListener("click",r=>{for(let e=0;e<array_avatar.length;e++)array_avatar[e].classList.add("invisible");array_avatar[e].classList.remove("invisible")})}),avatarFemale.addEventListener("click",e=>{genre_female.classList.add("genre"),genre_male.classList.remove("genre");for(let e=0;e<array_skin.length;e++)array_skin[e].addEventListener("click",r=>{for(let e=0;e<array_avatar.length;e++)array_avatar[e].classList.add("invisible");array_avatar[e+4].classList.remove("invisible")})}),new Chart(document.getElementById("summaryChart"),{type:"line",data:{labels:["00:00","06:00","12:00","18:00","23:00"],datasets:[{data:[1,3,8,5,2],yAxisID:"temperature",label:"Température",borderColor:"#980000",fill:!0},{data:[0,2,5,10,3],yAxisID:"rain",label:"Précipitation",borderColor:"#030340",fill:!0}]},options:{legend:{display:!1},title:{display:!1,text:"World population per region (in millions)"},scales:{yAxes:[{type:"linear",display:!0,position:"left",id:"temperature"},{type:"linear",display:!0,position:"right",id:"rain",ticks:{min:0,max:100},gridLines:{drawOnChartArea:!1}}]}}});const validerRegister=document.querySelector("#valider-register"),mailRegister=document.querySelector("#mail-register"),passRegister=document.querySelector("#pass-register"),prenomRegister=document.querySelector("#prenom-register"),sexeRegister=document.querySelector("#sexe-register"),adresseRegister=document.querySelector("#adresse-register"),villeRegister=document.querySelector("#ville-register"),colorRegister=document.querySelector("#color-register");function verifyRegister(e,r){e.addEventListener(r,e=>{if("Enter"===e.key||"click"===r){let e=new FormData;e.append("mail",mailRegister.value),e.append("pass",passRegister.value),e.append("prenom",prenomRegister.value),e.append("sexe",sexeRegister.value),e.append("color",colorRegister.value),e.append("adresse",adresseRegister.value),e.append("ville",villeRegister.value),fetch("/register/verif",{method:"POST",body:e}).then(e=>e.json()).then(e=>{if(console.log(e),e.message){document.querySelector(".message").innerHTML="";for(let r=0;r<e.message.length;r++)document.querySelector(".message").innerHTML+=e.message[r]+"</br>"}else document.querySelector(".message").innerHTML="Inscription réussie, vous allez être redirigé."})}})}document.onreadystatechange=function(){"complete"===document.readyState&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){let r=e.coords.latitude,t=e.coords.longitude;fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat="+r+"&lon="+t,{method:"POST"}).then(e=>e.json()).then(e=>{let r=void 0!==e.address.city?e.address.city:e.address.town,t=e.address.road;adresseRegister.value=t,villeRegister.value=r})})},colorRegister.addEventListener("click",()=>{colorRegister.style.backgroundColor=colorRegister.value}),verifyRegister(validerRegister,"click"),verifyRegister(mailRegister,"keydown"),verifyRegister(passRegister,"keydown"),verifyRegister(prenomRegister,"keydown"),verifyRegister(adresseRegister,"keydown"),verifyRegister(villeRegister,"keydown");
//# sourceMappingURL=app.js.map