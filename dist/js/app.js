const location_input=document.querySelector("#location-input"),submit=document.querySelector("#adress");function verify(e,t){e.addEventListener(t,e=>{if("Enter"===e.key||"click"===t){let e=`https://nominatim.openstreetmap.org/search?format=json&city=${location_input.value}`;fetch(e,{method:"POST"}).then(e=>e.json()).then(e=>{if(e.error)document.querySelector("#error").innerHTML=e.error;else{let t=e[0].lon,r=e[0].lat,a=new FormData;a.append("latitude",r),a.append("longitude",t),fetch("/weather/get",{method:"POST",body:a}).then(e=>e.json()).then(e=>{if(e.error)document.querySelector("#error").innerHTML=e.error;else{console.log(e);let t=Math.round(e.hourly.data[0].temperature),r=Math.round(e.hourly.data[6].temperature),a=Math.round(e.hourly.data[12].temperature),n=Math.round(e.hourly.data[18].temperature),i=Math.round(e.hourly.data[23].temperature),o=Math.round(e.hourly.data[0].precipProbability),l=Math.round(e.hourly.data[6].precipProbability),s=Math.round(e.hourly.data[12].precipProbability),u=Math.round(e.hourly.data[18].precipProbability),d=Math.round(e.hourly.data[23].precipProbability);console.log(i),new Chart(document.getElementById("summaryChart"),{type:"line",data:{labels:["00:00","06:00","12:00","18:00","23:00"],datasets:[{data:[t,r,a,n,i],yAxisID:"temperature",label:"Température",borderColor:"#980000",fill:!0},{data:[o,l,s,u,d],yAxisID:"rain",label:"Précipitation",borderColor:"#030340",fill:!0}]},options:{legend:{display:!1},title:{display:!1,text:"World population per region (in millions)"},scales:{yAxes:[{type:"linear",display:!0,position:"left",id:"temperature"},{type:"linear",display:!0,position:"right",id:"rain",ticks:{min:0,max:100},gridLines:{drawOnChartArea:!1}}]}}});let c="";switch(Math.round(8*e.daily.data[0].moonPhase)/8){case 1:c="Nouvelle lune";break;case.125:c="Croissant de lune";break;case.25:c="Demi lune";break;case.5:c="Pleine lune"}let m,y,h,p,g=new Date(1e3*e.currently.time),v=new Date(1e3*e.daily.data[0].sunsetTime),M=new Date(1e3*e.daily.data[0].sunriseTime);m=M.getHours()<10?"0"+M.getHours():M.getHours(),y=M.getMinutes()<10?"0"+M.getMinutes():M.getMinutes(),h=v.getHours()<10?"0"+v.getHours():v.getHours(),p=v.getMinutes()<10?"0"+v.getMinutes():v.getMinutes(),weatherDay.innerHTML=day[g.getDay()],weatherDate.innerHTML=g.getDate()+" "+month[g.getMonth()]+" "+g.getFullYear(),message.innerHTML=e.currently.summary,temperature.innerHTML=Math.round(e.currently.temperature)+"°C",pluie.innerHTML=Math.round(100*e.currently.precipProbability)+"%",weatherData[0].innerHTML=Math.round(e.currently.pressure)+" hpa",weatherData[1].innerHTML=Math.round(e.currently.windSpeed)+" m/s",weatherData[2].innerHTML=Math.round(e.currently.humidity)+"%",weatherData[3].innerHTML=Math.round(100*e.currently.precipProbability)+"%",weatherData[4].innerHTML=Math.round(e.currently.temperature)+"°C",weatherData[5].innerHTML=Math.round(e.currently.uvIndex),weatherData[6].innerHTML=Math.round(e.currently.visibility)+" km",weatherData[7].innerHTML=m+":"+y,weatherData[8].innerHTML=h+":"+p,weatherData[9].innerHTML=c,setTime.value=g.getHours(),weatherHeure.innerHTML=g.getHours()+":00",compass.style.transform="rotate("+e.currently.windBearing+"deg",setTime.addEventListener("change",()=>{message.innerHTML=e.hourly.data[setTime.value].summary,temperature.innerHTML=Math.round(e.hourly.data[setTime.value].temperature)+"°C",pluie.innerHTML=Math.round(100*e.hourly.data[setTime.value].precipProbability)+"%",weatherData[0].innerHTML=Math.round(e.hourly.data[setTime.value].pressure)+" hpa",weatherData[1].innerHTML=Math.round(e.hourly.data[setTime.value].windSpeed)+" m/s",weatherData[2].innerHTML=Math.round(e.hourly.data[setTime.value].humidity)+"%",weatherData[3].innerHTML=Math.round(100*e.hourly.data[setTime.value].precipProbability)+"%",weatherData[4].innerHTML=Math.round(e.hourly.data[setTime.value].temperature)+"°C",weatherData[5].innerHTML=Math.round(e.hourly.data[setTime.value].uvIndex),weatherData[6].innerHTML=Math.round(e.hourly.data[setTime.value].visibility)+" km",weatherHeure.innerHTML=setTime.value+":00",compass.style.transform="rotate("+e.hourly.data[setTime.value].windBearing+"deg"})}})}})}})}verify(submit,"click"),verify(location_input,"keydown");const message=document.querySelector("#message"),temperature=document.querySelector("#tempData"),pluie=document.querySelector("#tempRain"),weatherData=document.querySelectorAll(".data"),weatherDate=document.querySelector("#weather-date"),setTime=document.querySelector("#setTime"),weatherHeure=document.querySelector("#weather-heure"),weatherDay=document.querySelector("#weather-day"),weatherImg=document.querySelector("#weather-img"),compass=document.querySelector("#compass"),precedent=document.querySelector("#precedent"),suivant=document.querySelector("#suivant"),search=document.querySelector("#search"),month=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],day=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"];let time=new Date;time=time.getTime();let limit=(time=Math.round(time/1e3))+518400,base=time;document.onreadystatechange=function(){console.log("onreadystatechange marche"),"complete"===document.readyState&&(console.log("if complete marche"),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){let t=e.coords.latitude,r=e.coords.longitude,a=new FormData;function n(e){let t=Math.round(e.hourly.data[0].temperature),r=Math.round(e.hourly.data[6].temperature),a=Math.round(e.hourly.data[12].temperature),n=Math.round(e.hourly.data[18].temperature),i=Math.round(e.hourly.data[23].temperature),o=Math.round(100*e.hourly.data[0].precipProbability),l=Math.round(100*e.hourly.data[6].precipProbability),s=Math.round(100*e.hourly.data[12].precipProbability),u=Math.round(100*e.hourly.data[18].precipProbability),d=Math.round(100*e.hourly.data[23].precipProbability);new Chart(document.getElementById("summaryChart"),{type:"line",data:{labels:["00:00","06:00","12:00","18:00","23:00"],datasets:[{data:[t,r,a,n,i],yAxisID:"temperature",label:"Température",borderColor:"#980000",fill:!0},{data:[o,l,s,u,d],yAxisID:"rain",label:"Précipitation",borderColor:"#030340",fill:!0}]},options:{legend:{display:!1},title:{display:!1,text:"World population per region (in millions)"},scales:{yAxes:[{type:"linear",display:!0,position:"left",id:"temperature"},{type:"linear",display:!0,position:"right",id:"rain",ticks:{min:0,max:100},gridLines:{drawOnChartArea:!1}}]}}});let c="";switch(Math.round(8*e.daily.data[0].moonPhase)/8){case 0:case 1:c="Nouvelle lune";break;case.125:case.875:c="Croissant de lune";break;case.25:case.375:case.625:case.75:c="Demi lune";break;case.5:c="Pleine lune"}let m,y,h,p,g=new Date(1e3*e.currently.time),v=new Date(1e3*e.daily.data[0].sunsetTime),M=new Date(1e3*e.daily.data[0].sunriseTime);m=M.getHours()<10?"0"+M.getHours():M.getHours(),y=M.getMinutes()<10?"0"+M.getMinutes():M.getMinutes(),h=v.getHours()<10?"0"+v.getHours():v.getHours(),p=v.getMinutes()<10?"0"+v.getMinutes():v.getMinutes(),weatherDay.innerHTML=day[g.getDay()],weatherDate.innerHTML=g.getDate()+" "+month[g.getMonth()]+" "+g.getFullYear(),message.innerHTML=e.currently.summary,temperature.innerHTML=Math.round(e.currently.temperature)+"°C",weatherImg.src="../Assets/img/weather-icons/"+e.currently.icon+".png",pluie.innerHTML=Math.round(100*e.currently.precipProbability)+"%",weatherData[0].innerHTML=Math.round(e.currently.pressure)+" hpa",weatherData[1].innerHTML=Math.round(e.currently.windSpeed)+" m/s",weatherData[2].innerHTML=Math.round(e.currently.humidity)+"%",weatherData[3].innerHTML=Math.round(100*e.currently.precipProbability)+"%",weatherData[4].innerHTML=Math.round(e.currently.temperature)+"°C",weatherData[5].innerHTML=Math.round(e.currently.uvIndex),weatherData[6].innerHTML=Math.round(e.currently.visibility)+" km",weatherData[7].innerHTML=m+":"+y,weatherData[8].innerHTML=h+":"+p,weatherData[9].innerHTML=c,setTime.value=g.getHours(),weatherHeure.innerHTML=g.getHours()+":00",compass.style.transform="rotate("+e.currently.windBearing+"deg"}function i(e){message.innerHTML=e.hourly.data[setTime.value].summary,temperature.innerHTML=Math.round(e.hourly.data[setTime.value].temperature)+"°C",weatherImg.src="../Assets/img/weather-icons/"+e.hourly.data[setTime.value].icon+".png",pluie.innerHTML=Math.round(100*e.hourly.data[setTime.value].precipProbability)+"%",weatherData[0].innerHTML=Math.round(e.hourly.data[setTime.value].pressure)+" hpa",weatherData[1].innerHTML=Math.round(e.hourly.data[setTime.value].windSpeed)+" m/s",weatherData[2].innerHTML=Math.round(e.hourly.data[setTime.value].humidity)+"%",weatherData[3].innerHTML=Math.round(100*e.hourly.data[setTime.value].precipProbability)+"%",weatherData[4].innerHTML=Math.round(e.hourly.data[setTime.value].temperature)+"°C",weatherData[5].innerHTML=Math.round(e.hourly.data[setTime.value].uvIndex),weatherData[6].innerHTML=Math.round(e.hourly.data[setTime.value].visibility)+" km",weatherHeure.innerHTML=setTime.value+":00",compass.style.transform="rotate("+e.hourly.data[setTime.value].windBearing+"deg"}a.append("latitude",t),a.append("longitude",r),console.log("if geolocalisation marche"),fetch("/weather/get",{method:"POST",body:a}).then(e=>e.json()).then(e=>{n(e),setTime.addEventListener("change",()=>{i(e)})}).catch(e=>{console.log(e)}),precedent.addEventListener("click",()=>{let t=new FormData,r=e.coords.latitude,a=e.coords.longitude;time-=86400,console.log(time),console.log(base),precedent.style.display=time===base?"none":"block",suivant.style.display=time===limit?"none":"block",precedent.style.display=time===base?"none":"block",t.append("latitude",r),t.append("longitude",a),t.append("time",time),fetch("/weather/get",{method:"POST",body:t}).then(e=>e.json()).then(e=>{n(e),setTime.addEventListener("change",()=>{i(e)})}).catch(e=>{console.log(e)})}),suivant.addEventListener("click",()=>{let t=new FormData,r=e.coords.latitude,a=e.coords.longitude;time+=86400,console.log(time),console.log(limit),suivant.style.display=time===limit?"none":"block",precedent.style.display=time===base?"none":"block",suivant.style.display=time===limit?"none":"block",t.append("latitude",r),t.append("longitude",a),t.append("time",time),fetch("/weather/get",{method:"POST",body:t}).then(e=>e.json()).then(e=>{n(e),setTime.addEventListener("change",()=>{i(e)})}).catch(e=>{console.log(e)})})}))};const connexionLogin=document.querySelector("#connexion_login"),loginLogin=document.querySelector("#login_login"),passLogin=document.querySelector("#pass_login");function verify(e,t){e.addEventListener(t,e=>{if("Enter"===e.key||"click"===t){let e=new FormData;e.append("login",loginLogin.value),e.append("pass",passLogin.value),fetch("/login/verif",{method:"POST",body:e}).then(e=>e.json()).then(e=>{e.error?document.querySelector("#error").innerHTML=e.error:(console.log(e),window.location.replace("/user"))})}})}verify(connexionlogin,"click"),verify(loginlogin,"keydown"),verify(passlogin,"keydown");const genre_male=document.querySelector("#maleButton"),genre_female=document.querySelector("#femaleButton"),avatar_m1=document.querySelector("#avatar_m1"),avatar_m2=document.querySelector("#avatar_m2"),avatar_m3=document.querySelector("#avatar_m3"),avatar_m4=document.querySelector("#avatar_m4"),avatar_f1=document.querySelector("#avatar_f1"),avatar_f2=document.querySelector("#avatar_f2"),avatar_f3=document.querySelector("#avatar_f3"),avatar_f4=document.querySelector("#avatar_f4"),array_avatar=document.querySelectorAll(".img-avatar"),array_skin=document.querySelectorAll(".my-2"),skin1=document.querySelector("#skin1"),skin2=document.querySelector("#skin2"),skin3=document.querySelector("#skin3"),skin4=document.querySelector("#skin4");avatar_m1.classList.remove("invisible"),genre_male.classList.add("genre"),genre_female.classList.remove("genre");for(let e=1;e<array_avatar.length;e++)array_avatar[e].classList.add("invisible");for(let e=0;e<array_skin.length;e++)array_skin[e].addEventListener("click",t=>{for(let e=0;e<array_avatar.length;e++)array_avatar[e].classList.add("invisible");array_avatar[e].classList.remove("invisible")});genre_male.addEventListener("click",e=>{avatar_m1.classList.remove("invisible"),genre_male.classList.add("genre"),genre_female.classList.remove("genre");for(let e=1;e<array_avatar.length;e++)array_avatar[e].classList.add("invisible");for(let e=0;e<array_skin.length;e++)array_skin[e].addEventListener("click",t=>{for(let e=0;e<array_avatar.length;e++)array_avatar[e].classList.add("invisible");array_avatar[e].classList.remove("invisible")})}),genre_female.addEventListener("click",e=>{for(let e=0;e<array_avatar.length;e++)array_avatar[e].classList.add("invisible");avatar_f1.classList.remove("invisible"),genre_female.classList.add("genre"),genre_male.classList.remove("genre");for(let e=0;e<array_skin.length;e++)array_skin[e].addEventListener("click",t=>{for(let e=0;e<array_avatar.length;e++)array_avatar[e].classList.add("invisible");array_avatar[e+4].classList.remove("invisible")})}),new Chart(document.getElementById("summaryChart"),{type:"line",data:{labels:["00:00","06:00","12:00","18:00","23:00"],datasets:[{data:[1,3,8,5,2],yAxisID:"temperature",label:"Température",borderColor:"#980000",fill:!0},{data:[0,2,5,10,3],yAxisID:"rain",label:"Précipitation",borderColor:"#030340",fill:!0}]},options:{legend:{display:!1},title:{display:!1,text:"World population per region (in millions)"},scales:{yAxes:[{type:"linear",display:!0,position:"left",id:"temperature"},{type:"linear",display:!0,position:"right",id:"rain",ticks:{min:0,max:100},gridLines:{drawOnChartArea:!1}}]}}});const validerRegister=document.querySelector("#valider-register"),mailRegister=document.querySelector("#mail-register"),passRegister=document.querySelector("#pass-register"),prenomRegister=document.querySelector("#prenom-register"),sexeRegister=document.querySelector("#sexe-register"),adresseRegister=document.querySelector("#adresse-register"),villeRegister=document.querySelector("#ville-register"),colorRegister=document.querySelector("#color-register");function verifyRegister(e,t){e.addEventListener(t,e=>{if("Enter"===e.key||"click"===t){let e=new FormData;e.append("mail",mailRegister.value),e.append("pass",passRegister.value),e.append("prenom",prenomRegister.value),e.append("sexe",sexeRegister.value),e.append("color",colorRegister.value),e.append("adresse",adresseRegister.value),e.append("ville",villeRegister.value),fetch("/register/verif",{method:"POST",body:e}).then(e=>e.json()).then(e=>{if(console.log(e),e.message){document.querySelector(".message").innerHTML="";for(let t=0;t<e.message.length;t++)document.querySelector(".message").innerHTML+=e.message[t]+"</br>"}else document.querySelector(".message").innerHTML="Inscription réussie, vous allez être redirigé."})}})}document.onreadystatechange=function(){"complete"===document.readyState&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){let t=e.coords.latitude,r=e.coords.longitude;fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat="+t+"&lon="+r,{method:"POST"}).then(e=>e.json()).then(e=>{let t=void 0!==e.address.city?e.address.city:e.address.town,r=e.address.road;adresseRegister.value=r,villeRegister.value=t})})},colorRegister.addEventListener("click",()=>{colorRegister.style.backgroundColor=colorRegister.value}),verifyRegister(validerRegister,"click"),verifyRegister(mailRegister,"keydown"),verifyRegister(passRegister,"keydown"),verifyRegister(prenomRegister,"keydown"),verifyRegister(adresseRegister,"keydown"),verifyRegister(villeRegister,"keydown");
//# sourceMappingURL=app.js.map